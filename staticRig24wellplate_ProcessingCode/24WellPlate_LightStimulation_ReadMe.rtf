{\rtf1\ansi\ansicpg1252\cocoartf1561\cocoasubrtf200
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww15040\viewh13140\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 24-well plate with Light Stimulation\
Image Processing Read Me\
by Matt Churgin\
Fang-Yen Lab, University of Pennsylvania\
Last updated 07 May 2018\
\
This suite of scripts will aid the user in processing data acquired on static imaging rigs of 24-well plates filled with populations of 
\i C. elegans.
\i0 \
\
This read me and associated functions have been adapted from WorMotel processing code (see Churgin et al., eLife 2017).  However, many post-image processing steps are different.  \
\
Note:  These analysis codes assume images of type \'91png.\'92  The codes also assume the presence of a periodic light stimulus and non-continuous imaging (i.e. images acquired only surrounding a light stimulus).  More flexibility is forthcoming.\
\
Before beginning image processing, ensure that the following files are in the Matlab path, as all these files are required to successfully process the images (as described in Part 1 below):\
ComputeActivityMatt.m\
ComputeTimeDiffBtwTwoDateVectorsMatt.m\
GetImageTimeArrayMatt.m\
mainFile.m\
mainFile2.m\
ROIDefine.m\
SearchActiveImagingPeriodsMatt.m\
SearchStimulationTimeMatt.m\
\

\b \ul Part 1:  Image Processing\

\b0 \ulnone \

\b 1.  Define Well Centers and Well Size (ROI selection)
\b0 \
Run \'93mainFile.m\'94\
Select the first image of the experiment you want to process.\
Select the default parameters when the next dialog box pops up.\
You will next be asked to define the grid of the plate well centers and the size of a representative well.\
To select the well centers, click, in succession, on the center of the upper left, upper right, lower left, then lower right well of the 24-well plate.  This action define the the grid of well centers.\
Then, in a single representative well, click on the upper left and lower right of the well.  This action defines the size of each well.\
When finished, click on the right side of the image figure in the gray region outside the image.  \
This concludes ROI selection.  Continue to step 2.\
\

\b 2.  Process the images
\b0 \
Select the folder with the images you want to process.\
Depending on how many images you have acquired, this step may take up to a few hours.\
Progress on the processing of each day\'92s images should appear in the Matlab command window.\
When complete, the processed data files (\'93pdata\'94) will be located in a folder entitled \'93Analysis\'94 that resides inside the same folder as where the original images are located.  Inside the \'93Analysis\'94 folder should be the \'93pdata\'94 files.  These files contain the activity information for each light stimulation period.\
\

\b \ul Part 2:  Data Analysis\
\
\ulnone 1.  Run createActivity.m\

\b0 Select the pdata files corresponding to pdata60 for your experiment.  Press enter.  The script will save the average activity in each well before and after blue light stimulation.\
Note:  The default assumes four conditions on the plate consisting of 6 wells each.  You may edit the regions of interest in the first few lines of the code.  For each of four conditions, enter the wells corresponding to those genotypes.  You may also change the number of conditions by adding additional lines such as roi\{5\}=[1 3]; etc.
\b \
\
2.  Run script24wells.m
\b0 \
Ensure that ROIs1.mat and lightresponse1.mat are in the current working directory.  Run script24wells.m.  For each of the four conditions you have designated, the script will calculate and plot T99 and T85 as described.  \
\
}